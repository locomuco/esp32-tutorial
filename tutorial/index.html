
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Exploring WiFi Mesh with the ESP32</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab title="Exploring WiFi Mesh with the ESP32"
                  environment="web"
                  feedback-link="https://github.com/locomuco/esp32-tutorial/issues">
    
      <google-codelab-step label="Welcome" duration="0">
        <p>To the first codelab of the Embedded Meetup Group Munich</p>
<h2><strong>What&#39;s the target audience of this tutorial?</strong></h2>
<p>Everybody interested in programming C or C++</p>
<p>No previous coding experience needed</p>
<h2><strong>What is an ESP32?</strong></h2>
<p>The ESP32 is a low cost WiFi Chip</p>
<p><img style="width: 624.00px" src="img/2207d1d682100539.png"></p>
<ul>
<li><a href="https://www.espressif.com/en/products/hardware/esp32/overview" target="_blank">https://www.espressif.com/en/products/hardware/esp32/overview</a></li>
</ul>
<p>Some basics that you&#39;ll also learn in this codelab are:</p>
<ul>
<li><strong>Git &amp; Github </strong>- learn the basics of source control</li>
</ul>
<p>This codelab will walk you through the process of setting up the environment to compile and program some example code to an ESP32 and start some own development to extend the functionality of the given sample</p>
<aside class="special"><p>Any Feedback? Open an issue at <a href="https://github.com/locomuco/esp32-tutorial/issues" target="_blank">https://github.com/locomuco/esp32-tutorial/issues</a></p>
</aside>
<h2><strong>What you will build</strong></h2>
<ul>
<li>A sample application using the ESP32</li>
</ul>
<h2 class="checklist"><strong>What you&#39;ll learn</strong></h2>
<ul class="checklist">
<li>How to build &amp; compile a program for a Microcontroller</li>
<li>How to program a Microcontroller with your compiled code</li>
<li>How to set up a Mesh Network with the ESP32</li>
</ul>
<h2><strong>What you&#39;ll need</strong></h2>
<ul>
<li>A ESP32 development board</li>
<li>A computer running Linux, Windows, or macOS</li>
<li>A USB cable to connect the dev board to your computer</li>
<li>A text editor, or the IDE of your choice</li>
<li>Basic knowledge of C</li>
</ul>
<p>This codelab is focused on Embedded Code. Non-relevant concepts and code blocks are glossed over and are provided for you to simply copy and paste.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Git &amp; Github" duration="0">
        <h2><strong>Setting up Git</strong></h2>
<p>If you have experience with Git and Github already, feel free to jump directly to the next chapter</p>
<h3><strong>Linux (Ubuntu)</strong></h3>
<p>Install the git package</p>
<pre><code>sudo apt-get install git</code></pre>
<p>Set your git name and email</p>
<pre><code>git config --global user.name &#34;John Doe&#34;
git config --global user.email &#34;john.doe@gmail.com&#34;</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Getting set up" duration="0">
        <h2><strong>Setting up the Toolchain</strong></h2>
<h3><strong>Linux (Ubuntu)</strong></h3>
<p><a href="https://dl.espressif.com/dl/xtensa-esp32-elf-linux64-1.22.0-80-g6c4433a-5.2.0.tar.gz" target="_blank"><paper-button class="colored" raised><iron-icon icon="file-download"></iron-icon>Download Toolchain 64 bit</paper-button></a></p>
<pre><code>mkdir -p ~/esp
cd ~/esp
tar -xzf ~/Downloads/xtensa-esp32-elf-linux64-1.22.0-80-g6c4433a-5.2.0.tar.gz</code></pre>
<p><a href="https://dl.espressif.com/dl/xtensa-esp32-elf-linux32-1.22.0-80-g6c4433a-5.2.0.tar.gz" target="_blank"><paper-button class="colored" raised><iron-icon icon="file-download"></iron-icon>Download Toolchain 32 bit</paper-button></a></p>
<pre><code>mkdir -p ~/esp
cd ~/esp
tar -xzf ~/Downloads/xtensa-esp32-elf-linux32-1.22.0-80-g6c4433a-5.2.0.tar.gz</code></pre>
<p>Setting up Build Requirements</p>
<pre><code>sudo apt-get install gcc git wget make libncurses-dev flex bison gperf python python-pip python-setuptools python-serial python-cryptography python-future python-pyparsing</code></pre>
<pre><code>export PATH=&#34;$HOME/esp/xtensa-esp32-elf/bin:$PATH&#34;</code></pre>
<h3><strong>Windows</strong></h3>
<p><a href="https://dl.espressif.com/dl/esp32_win32_msys2_environment_and_toolchain-20181001.zip" target="_blank"><paper-button class="colored" raised><iron-icon icon="file-download"></iron-icon>Download ZIP</paper-button></a></p>
<p>Unzip the zip file to <code>C:\</code> (or some other location, but this guide assumes <code>C:\</code>) and it will create an <code>msys32</code> directory with a pre-prepared environment.</p>
<h3>macOS</h3>
<p><a href="https://dl.espressif.com/dl/xtensa-esp32-elf-osx-1.22.0-80-g6c4433a-5.2.0.tar.gz" target="_blank"><paper-button class="colored" raised><iron-icon icon="file-download"></iron-icon>Download Toolchain</paper-button></a></p>
<h2><strong>Getting the Source Code</strong></h2>
<p>Checking out the espressif Mesh Development Kit can be done with following command, be sure to add the recursive option, to check out all the submodules. The submodules also contain a specific version of the ESP-IDF, the common</p>
<pre><code>git clone --recursive https://github.com/espressif/esp-mdf.git
export MDF_PATH=~/esp/esp-mdf</code></pre>
<h2><strong>Connecting the ESP32 Board to your computer</strong></h2>
<p>Connecting the DEV-BOARD to your PC is done with a plain USB cable, the Dev Board holds a FTDI chip, that provides a serial interface to the ESP32.</p>
<p><img style="width: 624.00px" src="img/1f90719ce58a115e.png"></p>
<aside class="special"><p>In linux you user needs to be added to the <strong>dialout</strong> group</p>
</aside>
<pre><code>Windows  COM1
Linux    /dev/ttyUSB
macOS    /dev/cu</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Building your first FW image for the ESP32" duration="0">
        <h2><strong>Build and flash the project by running:</strong></h2>
<p>Build and flash your device using</p>
<pre><code>make</code></pre>
<p><code>The esp-idf uses menuconfig to apply Kernel configurations.</code></p>
<pre><code>make menuconfig</code></pre>
<h2><img style="width: 624.00px" src="img/fe3333caf07c7ad0.png"></h2>


      </google-codelab-step>
    
      <google-codelab-step label="Programming your FW image to the device" duration="0">
        <p>Programming the device can be done with espressif tools <strong>esptools</strong></p>
<pre><code>make flash</code></pre>
<h2><strong>TBD</strong></h2>
<pre>esptool.py v2.0-beta2
Flashing binaries to serial port /dev/ttyUSB0 (app at offset 0x10000)...
esptool.py v2.0-beta2
Connecting........___
Uploading stub...
Running stub...
Stub running...
Changing baud rate to 921600
Changed.
Attaching SPI flash...
Configuring flash size...
Auto-detected Flash size: 4MB
Flash params set to 0x0220
Compressed 11616 bytes to 6695...
Wrote 11616 bytes (6695 compressed) at 0x00001000 in 0.1 seconds (effective 920.5 kbit/s)...
Hash of data verified.
Compressed 408096 bytes to 171625...
Wrote 408096 bytes (171625 compressed) at 0x00010000 in 3.9 seconds (effective 847.3 kbit/s)...
Hash of data verified.
Compressed 3072 bytes to 82...
Wrote 3072 bytes (82 compressed) at 0x00008000 in 0.0 seconds (effective 8297.4 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting...</pre>
<pre><code>make monitor</code></pre>
<pre>MONITOR
--- idf_monitor on /dev/ttyUSB0 115200 ---
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
ets Jun  8 2016 00:22:57

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
ets Jun  8 2016 00:22:57
...</pre>
<pre><code></code></pre>
<aside class="special"><p>To leave the logging use   â€˜Ctrl+]&#39;</p>
<p>The programming baudrate can be changed using menuconfig as described in the previous step, see selection below, this speeds up the development cycle by a few seconds</p>
</aside>
<p><img style="width: 624.00px" src="img/93dd2e680b74413f.png"></p>
<p>Congrats, you now can do the full compile / program / debug cycle :-)</p>
<aside class="special"><p>You can combine the whole cycle in one line typing:</p>
<p>make flash monitor</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="ESP32 WiFi Mesh" duration="0">
        <p>blabla</p>
<p><img style="width: 624.00px" src="img/314228079280b795.png"></p>
<h2><strong>TBD</strong></h2>
<p>TBD</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
